<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GestÃ£o de KPIs</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>

<body>
  <div class="container">
    <header>
      <h1>GestÃ£o de Indicadores (KPI)</h1>
      <button class="theme-toggle" onclick="toggleTheme()" title="Alternar tema">ðŸŒ™</button>
    </header>

    <div class="grid-layout">
      <!-- Lado esquerdo: FormulÃ¡rio -->
      <div class="card form-panel">
        <h2>Cadastro de Indicadores</h2>
        <form action="/enviar" method="POST">
          <input type="text" name="kpi" placeholder="Indicador (KPI)" required />
          <input type="text" name="objetivo" placeholder="Objetivo EstratÃ©gico" required />
          <select name="perspectiva" required>
            <option value="">Selecione a Perspectiva</option>
            <option value="Clientes">Clientes</option>
            <option value="Financeira">Financeira</option>
            <option value="Processos Internos">Processos Internos</option>
            <option value="Aprendizado e Crescimento">Aprendizado e Crescimento</option>
          </select>
          <input type="number" name="valor" placeholder="Valor" step="any" required />
          <input type="text" name="responsavel" placeholder="ResponsÃ¡vel" required />
          <input type="text" name="unidade" placeholder="Unidade (%, R$, Horas etc.)" required />
          <textarea name="observacoes" placeholder="ObservaÃ§Ãµes..."></textarea>
          <button class="btn" type="submit">Salvar KPI</button>
        </form>
        <button id="btn-ver-tabela" class="btn alt">Ver Tabela</button>
        <button id="btn-ver-powerbi" class="btn alt">Ver Dashboard Power BI</button>
      </div>

      <!-- Lado direito: ConteÃºdo dinÃ¢mico -->
      <div class="card content-panel">
        <!-- Tabela -->
        <div id="tabela-step" class="fade hidden">
          <h2>KPIs Cadastrados</h2>
          {% if dados is not none and not dados.empty %}
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  {% for coluna in dados.columns %}
                  <th>{{ coluna }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for _, linha in dados.iterrows() %}
                <tr>
                  {% for valor in linha %}
                  <td>{{ valor }}</td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <p>Nenhum KPI cadastrado ainda.</p>
          {% endif %}
          <button id="btn-voltar-tabela" class="btn alt">Voltar</button>
        </div>

        <!-- Power BI -->
        <div id="powerbi-embed" class="fade hidden">
          <h2>Dashboard Power BI</h2>
          <iframe title="ProjetoGestaoTI" width="100%" height="400"
            src="https://app.powerbi.com/view?r=eyJrIjoiNTRjMWQwNDMtODJlMC00ZDMwLTg5OWYtMjJjYWY3ODg5NTZiIiwidCI6ImNmNzJlMmJkLTdhMmItNDc4My1iZGViLTM5ZDU3YjA3Zjc2ZiIsImMiOjR9"
            frameborder="0" allowfullscreen="true"></iframe>
          <button id="btn-voltar-powerbi" class="btn alt">Voltar</button>
        </div>
      </div>
    </div>
  </div>

  <script defer src="/static/script.js"></script>
</body>

</html>
